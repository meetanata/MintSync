<!DOCTYPE HTML>
<html>
  <head>
    <script type="text/javascript">
       window.addEventListener("load", function(){
        var theButton,
			ToolbarUIItemProperties = {
				title: "MintSync",
				icon: "img/button_icon.png",
				popup: {
					href: "popup.html",
					width: 330,
					height: 260
				}
			};
			
        theButton = opera.contexts.toolbar.createItem(ToolbarUIItemProperties);
        opera.contexts.toolbar.addItem(theButton);
		
		//add connection to popup for currentURL sending
		opera.extension.onconnect = function(event) {
			try {
				event.source.postMessage(opera.extension.tabs.getFocused().url);
			}
			catch(error) {
				//ignore it for now
				alert("There was an error with the Opera Extension OnConnect callback:"+error);
			}
		}
		
      }, false);
    </script>
  </head>
  <body>
  </body>
</html>